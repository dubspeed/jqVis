<html>
<head>
	<link rel="stylesheet" type="text/css" href="lib/codemirror.css">
	<link rel="stylesheet" type="text/css" href="jqvis.css"></link>
	<script type="text/javascript">
/* <![CDATA[ */
    (function() {
        var s = document.createElement('script'), t = document.getElementsByTagName('script')[0];
        s.type = 'text/javascript';
        s.async = true;
        s.src = 'http://api.flattr.com/js/0.6/load.js?mode=auto';
        t.parentNode.insertBefore(s, t);
    })();
/* ]]> */</script>
	<script src="lib/codemirror.js"></script>
	<script src="lib/mode/xml/xml.js"></script>
    <script src="lib/mode/javascript/javascript.js"></script>
    <script src="lib/mode/css/css.js"></script>
    <script src="lib/mode/htmlmixed/htmlmixed.js"></script>
	<script src="lib/jquery_1.7.2_dev.js" type="text/javascript" charset="utf-8"></script>
	<script src="src/dub.js" type="text/javascript" charset="utf-8"></script>
	<script src="src/jqvis.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript" charset="utf-8">
		$(document).ready(function() {
            var editor = CodeMirror.fromTextArea($("#editor")[0], {
                lineNumbers : true,
                matchBrackets : true
            }),

            vis = Object.create(jqvis),
            
            lastMarker = undefined,
            
            clearMarkers = function() {
                 if (lastMarker) {
                     for (var i=0; i<lastMarker.length; i += 1) {
                         editor.clearMarker(lastMarker[i]);
                     }
                 }             
            },

            setMarkers = function(lines) {
                 lastMarker = lines;
                 for (var i=0; i<lines.length; i += 1) {
                     editor.setMarker(lines[i], "<div class='highlight_line'>%N%</div>"); //, className)
                 }
            },
            
			queryEvent = function(evt) {
			     evt.preventDefault();
			     clearMarkers();
			     vis.setHTML(editor.getValue());
			     vis.query($("#query").val());
			     setMarkers(vis.getLines());
			},
			
			toggleHover = function(evt) {
			     $(this).toggleClass("button_hover");          
			};

            vis.setMark("<mark>", "</mark>");

			$("#submit").bind("click", queryEvent);
			$("#submit").bind("hover", toggleHover);
		});
	</script>
</head>
<body>
    <header class="softshadow">
        <h1>JQuery Visualizer</h1>
		<div id="flattr">
			<a class="FlattrButton" style="display: none;"
				href="http://jqvis.dubspeed.de"></a>
			<noscript>
				<a href="http://flattr.com/thing/720580/JQVis" target="_blank">
					<img src="http://api.flattr.com/button/flattr-badge-large.png"
					alt="Flattr this" title="Flattr this" border="0" />
				</a>
			</noscript>
		</div>
		<a href="https://github.com/you"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png" alt="Fork me on GitHub"></a>
    
    </header>

    <section id="querysection">
        <p>This tool lets you see your jQuery-query results by highlighting the markup you provide in the edit below. 
        Please try it! Paste your code in the editor below, enter your query as jQuery selector and see the magic happen! 
        Examples are: <code>p</code>, <code>p:first</code>, <code>li:last</code>, <code>p#id</code> or <code>p.class</code>.
        <a href="">Check out my blogpost discussing this project</a> or
        <a href="http://api.jquery.com/category/selectors/">Learn more about jQuery selectors.</a></p>
        <div id="submit" class="button softshadow">query</div>
		<textarea id="query">p</textarea>
    </section>
    
    <div class="rows">
        <div class="section leftarea">
            <form>
            <textarea id="editor" name="editor">
            
  <html>
  <head>
    <title>Simple</title>
  </head>
  <body>
    <h1>HTML Example</h1>
    <p id="para">This is a nice text paragraph</p>
    <p>Another paragrpah, this time with div insdide
       <div class="klass">a div</div> <div> another</div><br/>
       <strong>huhu</strong><br/>
    </p>
    <ul>
    <li>one</li>
    <li>two</li>
    <li>three</li>
    </ul>
  </body>
</html>
    
            
            
            </textarea>
            </form>
        </div>
        
    </div>

    <footer>
    </footer>

</body>
</html>